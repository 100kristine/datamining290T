<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>2013-02-01-Obtaining-Data</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="title" content="2013-02-01-Obtaining-Data"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2013-02-01 08:11:45 PST"/>
<meta name="author" content="Jim Blomo"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>

<link rel="stylesheet" type="text/css" href="production/common.css" />
<link rel="stylesheet" type="text/css" href="production/screen.css" media="screen" />
<link rel="stylesheet" type="text/css" href="production/projection.css" media="projection" />
<link rel="stylesheet" type="text/css" href="production/color-blue.css" media="projection" />
<link rel="stylesheet" type="text/css" href="production/presenter.css" media="presenter" />
<link href='http://fonts.googleapis.com/css?family=Lobster+Two:700|Yanone+Kaffeesatz:700|Open+Sans' rel='stylesheet' type='text/css'>


</head>
<body>

<div id="preamble">

</div>

<div id="content">
<h1 class="title">2013-02-01-Obtaining-Data</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 Obtaining Data</a></li>
<li><a href="#sec-2">2 Ways to Collect</a>
<ul>
<li><a href="#sec-2-1">2.1 Operational Data</a>
<ul>
<li><a href="#sec-2-1-1">2.1.1 Data from production</a></li>
</ul>
</li>
<li><a href="#sec-2-2">2.2 Example</a>
<ul>
<li><a href="#sec-2-2-1">2.2.1 Distributed Data</a></li>
</ul>
</li>
<li><a href="#sec-2-3">2.3 Data Warehouse</a>
<ul>
<li><a href="#sec-2-3-1">2.3.1 No free lunch</a></li>
</ul>
</li>
<li><a href="#sec-2-4">2.4 Unstructured</a>
<ul>
<li><a href="#sec-2-4-1">2.4.1 Yelp JSON logs</a></li>
</ul>
</li>
<li><a href="#sec-2-5">2.5 Search Logs Example</a>
<ul>
<li><a href="#sec-2-5-1">2.5.1 Imposing Structure</a></li>
</ul>
</li>
<li><a href="#sec-2-6">2.6 External APIs</a>
<ul>
<li><a href="#sec-2-6-1">2.6.1 Motivation</a></li>
</ul>
</li>
<li><a href="#sec-2-7">2.7 NYTimes API Example</a>
<ul>
<li><a href="#sec-2-7-1">2.7.1 Accessing these</a></li>
</ul>
</li>
<li><a href="#sec-2-8">2.8 Datasets</a>
<ul>
<li><a href="#sec-2-8-1">2.8.1 Research</a></li>
</ul>
</li>
<li><a href="#sec-2-9">2.9 Dataset Example</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Obtaining Data &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h2>
<div class="outline-text-2" id="text-1">


</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Ways to Collect &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="two_col">two_col</span></span></h2>
<div class="outline-text-2" id="text-2">

<ul>
<li>Operational Data
</li>
<li>Data Warehouse
</li>
<li>Unstructured Data
</li>
<li>External API
</li>
<li>Datasets
</li>
</ul>


<p>
<img src="img/bottlecaps.jpg"  alt="img/bottlecaps.jpg" />
</p>

</div>

<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> Operational Data &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h3>
<div class="outline-text-3" id="text-2-1">

<ul>
<li>Most frequent in industry
</li>
<li>Usually stored in databases best suited for transactional use
</li>
<li>Challenge is reoganizing data to suit question
</li>
</ul>


</div>

<div id="outline-container-2-1-1" class="outline-4">
<h4 id="sec-2-1-1"><span class="section-number-4">2.1.1</span> Data from production &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h4>
<div class="outline-text-4" id="text-2-1-1">

<ul>
<li>Most frequently you'll have data that is being used by the application,
      and you'll want to find insights in it
</li>
<li>We'll go into more detail in another class, but online use is
      optimized for small queries and small updates
</li>
<li>Frequently just accessing the data in bulk is a software enginering
      problem:
<ul>
<li>ensuring long queries don't hold up production usage
</li>
<li>joining across databases via software
</li>
<li>understanding esotaric columns, like "flags"
</li>
</ul>

</li>
<li>Often will want to reoganize data to look like transactional
</li>
<li>img: <a href="http://woodwarddesign.ca/blog/2009/03/06/bottle-caps/">http://woodwarddesign.ca/blog/2009/03/06/bottle-caps/</a>
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> Example &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h3>
<div class="outline-text-3" id="text-2-2">

<ul>
<li>Find the user names with most "liked" reviews on Yelp
</li>
</ul>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<tbody>
<tr><td class="left">user<sub>id</sub></td><td class="left">name</td><td class="left">flags</td></tr>
<tr><td class="left">25234</td><td class="left">Jim</td><td class="left">0x200</td></tr>
</tbody>
</table>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" /><col class="left" /><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<tbody>
<tr><td class="left">review<sub>id</sub></td><td class="left">business<sub>id</sub></td><td class="left">user<sub>id</sub></td><td class="left">stars</td><td class="left">text</td><td class="left">flags</td></tr>
<tr><td class="left">282</td><td class="left">52432</td><td class="left">25234</td><td class="left">4</td><td class="left">great place!</td><td class="left">0x1</td></tr>
</tbody>
</table>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<tbody>
<tr><td class="left">review<sub>id</sub></td><td class="left">src<sub>user</sub><sub>id</sub></td><td class="left">ufc<sub>flags</sub></td><td class="left">flags</td></tr>
<tr><td class="left">282</td><td class="left">8205</td><td class="left">0x1</td><td class="left">0x0</td></tr>
</tbody>
</table>



</div>

<div id="outline-container-2-2-1" class="outline-4">
<h4 id="sec-2-2-1"><span class="section-number-4">2.2.1</span> Distributed Data &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h4>
<div class="outline-text-4" id="text-2-2-1">

<ul>
<li>At Yelp we have a variety of database tables, and those tables can be
     spread across different databases
</li>
<li>At a minimum we frequently need to <code>JOIN</code> across tables to answer queries
<ul>
<li>eg. matching up user names with reviews from separate tables
</li>
</ul>

</li>
<li>It is possible the review table is only indexed on business ID, and so
     finding all reviews by a user is really disk intensive: make sure you're
     not slowing down the whole site!
</li>
<li>An additional challenge is when the "feedback" tables are in a separate
     database: can no longer issue normal SQL queries
</li>
<li>What are these "flag" columns for?
</li>
<li>Exactly: no one knows. Often must look into code, or compare data to
     production representation to guess meaning. In Yelp, <code>0x1</code> often means
     "inactive", so we probably don't want to count that feedback
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> Data Warehouse &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span>&nbsp;<span class="two_col">two_col</span></span></h3>
<div class="outline-text-3" id="text-2-3">

<ul>
<li>Data located on same system
</li>
<li>Organized for analytics queries
</li>
<li>Requires extra maintainence and understanding of construction
</li>
</ul>


<p>
   <img src="img/Ikea-Warehouse.jpg"  alt="img/Ikea-Warehouse.jpg" />
</p>
</div>

<div id="outline-container-2-3-1" class="outline-4">
<h4 id="sec-2-3-1"><span class="section-number-4">2.3.1</span> No free lunch &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h4>
<div class="outline-text-4" id="text-2-3-1">

<ul>
<li>A strong data warehouse can be a big improvement over operational data
</li>
<li>Hopefully, someone has already cleaned, joined data in a way that makes
     sense!
</li>
<li>Optimized for long running queries: less fear of brining down website!
</li>
<li>But you must learn how that process was accomplished in order to understand
     potential problems
</li>
<li>How to handle missing data?
</li>
<li>We'll go into more detail about how data warehouse schemas compare to
     online ones later in the course
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4"><span class="section-number-3">2.4</span> Unstructured &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h3>
<div class="outline-text-3" id="text-2-4">

<ul>
<li>Haphazard collection of data
</li>
<li>Unclear what structure should be
</li>
<li>Examples: Web logs, text, multimedia
</li>
<li>Must extract structure eventually
</li>
</ul>


</div>

<div id="outline-container-2-4-1" class="outline-4">
<h4 id="sec-2-4-1"><span class="section-number-4">2.4.1</span> Yelp JSON logs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h4>
<div class="outline-text-4" id="text-2-4-1">

<ul>
<li>When developing a web application, new context or details become
      important: how long did certain requests take? What link did a user follow
      to a website?
</li>
<li>Relational Databases aren't well suited for these wide varieties of
      potential attributes that don't apply to all items
</li>
<li>So the current work around is just to write all useful information down in
      a log, and extract what is needed later
</li>
<li>Text, like business reviews, another example: desired structure changes
      radically between questions: How many words? Characters? What is the sentiment?
</li>
<li>Pictures can contain attributes like color depth, length, width
</li>
<li>First step of data mining is often imposing structure on data: the data is
      not inherintly unstructured, it just is unclear what the structure <b>should be</b>
      until query time
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-5" class="outline-3">
<h3 id="sec-2-5"><span class="section-number-3">2.5</span> Search Logs Example &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h3>
<div class="outline-text-3" id="text-2-5">




<pre class="src src-log">193.139.1 jim [10/Oct/2013:13:55:36 -0700] <span style="color: #8b2252;">"GET /search?query=headache HTTP/1.1"</span> 200 9288
282.482.3 shreyas [10/Oct/2013:13:56:36 -0700] <span style="color: #8b2252;">"GET /search?query=bananas HTTP/1.1"</span> 200 2929
345.114.1 steven [10/Oct/2013:13:56:37 -0700] <span style="color: #8b2252;">"GET /search?query=cold HTTP/1.1"</span> 200 8232
10.328.52 anne [10/Oct/2013:13:56:39 -0700] <span style="color: #8b2252;">"GET /search?query=flu+shot HTTP/1.1"</span> 200 2342
10.328.52 lily [10/Oct/2013:13:57:40 -0700] <span style="color: #8b2252;">"GET /search?query=i290 HTTP/1.1"</span> 200 2342
</pre>


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col class="left" /><col class="left" /><col class="left" />
</colgroup>
<tbody>
<tr><td class="left">user<sub>name</sub></td><td class="left">date</td><td class="left">query</td></tr>
<tr><td class="left">jim</td><td class="left">10/Oct/2013:13:55:36 -0700</td><td class="left">headache</td></tr>
<tr><td class="left">shreyas</td><td class="left">10/Oct/2013:13:56:36 -0700</td><td class="left">bananas</td></tr>
<tr><td class="left">steven</td><td class="left">10/Oct/2013:13:56:37 -0700</td><td class="left">cold</td></tr>
<tr><td class="left">anne</td><td class="left">10/Oct/2013:13:56:39 -0700</td><td class="left">flu shot</td></tr>
<tr><td class="left">lily</td><td class="left">10/Oct/2013:13:57:40 -0700</td><td class="left">i290</td></tr>
</tbody>
</table>



</div>

<div id="outline-container-2-5-1" class="outline-4">
<h4 id="sec-2-5-1"><span class="section-number-4">2.5.1</span> Imposing Structure &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h4>
<div class="outline-text-4" id="text-2-5-1">

<ul>
<li>Extract only the rows we know follow a format
</li>
<li>Format queries from some encoding (eg. URL) to standardized format
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-6" class="outline-3">
<h3 id="sec-2-6"><span class="section-number-3">2.6</span> External APIs &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h3>
<div class="outline-text-3" id="text-2-6">

<ul>
<li>Better documented than internal data!
</li>
<li>More limited in amount and detail
</li>
<li>Commonly HTTP/REST based
</li>
</ul>


</div>

<div id="outline-container-2-6-1" class="outline-4">
<h4 id="sec-2-6-1"><span class="section-number-4">2.6.1</span> Motivation &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h4>
<div class="outline-text-4" id="text-2-6-1">

<ul>
<li>Comapnies are often searching for other ways to leverage their data
</li>
<li>Both for immediate business purposes, and for brand recognition
</li>
<li>Twitter more (in)famouse example
</li>
<li>NYTimes another good option
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-7" class="outline-3">
<h3 id="sec-2-7"><span class="section-number-3">2.7</span> NYTimes API Example &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h3>
<div class="outline-text-3" id="text-2-7">

<ul>
<li><a href="http://developer.nytimes.com/docs/read/article_search_api">Article Search API</a>
</li>
<li><a href="http://api.nytimes.com/svc/search/v1/article?format=json&amp;query=ballot&amp;api-key=6578bab7f8c3808ce4c392edc9a793f0:8:5717915">http://api.nytimes.com/svc/search/v1/article?format=json&amp;query=ballot&amp;api-key=6578bab7f8c3808ce4c392edc9a793f0:8:5717915</a>
</li>
</ul>


</div>

<div id="outline-container-2-7-1" class="outline-4">
<h4 id="sec-2-7-1"><span class="section-number-4">2.7.1</span> Accessing these &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h4>
<div class="outline-text-4" id="text-2-7-1">

<ul>
<li>More info on how to access these APIs is in the Web Archetecture class,
      but feel free to ask Shreyas or I about how best to access them
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-8" class="outline-3">
<h3 id="sec-2-8"><span class="section-number-3">2.8</span> Datasets &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h3>
<div class="outline-text-3" id="text-2-8">

<ul>
<li>Download large, curated set of data all at once
</li>
<li>Formats vary, but usually documented
</li>
<li>Can be useful to combine with other datasets or APIs
</li>
</ul>


<p>
<img src="img/kaggle-digits.png"  alt="img/kaggle-digits.png" />
</p>
</div>

<div id="outline-container-2-8-1" class="outline-4">
<h4 id="sec-2-8-1"><span class="section-number-4">2.8.1</span> Research &nbsp;&nbsp;&nbsp;<span class="tag"><span class="notes">notes</span></span></h4>
<div class="outline-text-4" id="text-2-8-1">

<ul>
<li>Datasets commonly used in research: can compare different techniques on
      same data to understand advantages
</li>
<li>Sizes can range to a few MB to GB
</li>
<li>JSON, CSV, XML all potential formats. Cleaning, organization for your
      question again becomes an important aspect
</li>
</ul>


</div>
</div>

</div>

<div id="outline-container-2-9" class="outline-3">
<h3 id="sec-2-9"><span class="section-number-3">2.9</span> Dataset Example &nbsp;&nbsp;&nbsp;<span class="tag"><span class="slide">slide</span></span></h3>
<div class="outline-text-3" id="text-2-9">

<ul>
<li><a href="https://www.kaggle.com/c/digit-recognizer">Kaggle Digit Recognizer</a>
</li>
<li><a href="https://bitly.com/bundles/hmason/1">Hilary Mason's Data Sets</a>
</li>
<li><a href="http://www.grouplens.org/node/73">MovieLens Data Sets</a>
</li>
</ul>





<script type="text/javascript" src="production/org-html-slideshow.js"></script>

</div>
</div>
</div>
</div>

<div id="postamble">
<p class="date">Date: 2013-02-01 08:11:45 PST</p>
<p class="author">Author: Jim Blomo</p>
<p class="creator">Org version 7.8.02 with Emacs version 23</p>
<a href="http://validator.w3.org/check?uri=referer">Validate XHTML 1.0</a>

</div>
</body>
</html>
